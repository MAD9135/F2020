<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4.2 React Component State | MAD9135</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="HTML5 App Development">
    <link rel="preload" href="/F2020/assets/css/0.styles.cc1da3e7.css" as="style"><link rel="preload" href="/F2020/assets/js/app.71c50f4b.js" as="script"><link rel="preload" href="/F2020/assets/js/2.ad437195.js" as="script"><link rel="preload" href="/F2020/assets/js/58.90d58982.js" as="script"><link rel="preload" href="/F2020/assets/js/6.2620568a.js" as="script"><link rel="preload" href="/F2020/assets/js/7.549e4e32.js" as="script"><link rel="prefetch" href="/F2020/assets/js/10.c2d815ec.js"><link rel="prefetch" href="/F2020/assets/js/11.02a0369f.js"><link rel="prefetch" href="/F2020/assets/js/12.3bf04f72.js"><link rel="prefetch" href="/F2020/assets/js/13.1c6e5c32.js"><link rel="prefetch" href="/F2020/assets/js/14.5d381c06.js"><link rel="prefetch" href="/F2020/assets/js/15.719e0a65.js"><link rel="prefetch" href="/F2020/assets/js/16.4f84fc00.js"><link rel="prefetch" href="/F2020/assets/js/17.02eb0c88.js"><link rel="prefetch" href="/F2020/assets/js/18.1b02271c.js"><link rel="prefetch" href="/F2020/assets/js/19.09648475.js"><link rel="prefetch" href="/F2020/assets/js/20.87442cf4.js"><link rel="prefetch" href="/F2020/assets/js/21.6acc8fc8.js"><link rel="prefetch" href="/F2020/assets/js/22.5bbfc680.js"><link rel="prefetch" href="/F2020/assets/js/23.8c578ce5.js"><link rel="prefetch" href="/F2020/assets/js/24.cb7a00dd.js"><link rel="prefetch" href="/F2020/assets/js/25.cbff6da5.js"><link rel="prefetch" href="/F2020/assets/js/26.c16a249a.js"><link rel="prefetch" href="/F2020/assets/js/27.167b7c92.js"><link rel="prefetch" href="/F2020/assets/js/28.0eda0394.js"><link rel="prefetch" href="/F2020/assets/js/29.451391d8.js"><link rel="prefetch" href="/F2020/assets/js/3.b1fd2577.js"><link rel="prefetch" href="/F2020/assets/js/30.b13b96b7.js"><link rel="prefetch" href="/F2020/assets/js/31.1c4f6cb4.js"><link rel="prefetch" href="/F2020/assets/js/32.b4b69cff.js"><link rel="prefetch" href="/F2020/assets/js/33.739c7797.js"><link rel="prefetch" href="/F2020/assets/js/34.03aed1d9.js"><link rel="prefetch" href="/F2020/assets/js/35.85081de8.js"><link rel="prefetch" href="/F2020/assets/js/36.22504173.js"><link rel="prefetch" href="/F2020/assets/js/37.9d876e07.js"><link rel="prefetch" href="/F2020/assets/js/38.eeda1499.js"><link rel="prefetch" href="/F2020/assets/js/39.11489612.js"><link rel="prefetch" href="/F2020/assets/js/4.cc77419a.js"><link rel="prefetch" href="/F2020/assets/js/40.cffceb2a.js"><link rel="prefetch" href="/F2020/assets/js/41.bd24dd52.js"><link rel="prefetch" href="/F2020/assets/js/42.00c7d473.js"><link rel="prefetch" href="/F2020/assets/js/43.cdd77206.js"><link rel="prefetch" href="/F2020/assets/js/44.98bddbe7.js"><link rel="prefetch" href="/F2020/assets/js/45.5490fcb1.js"><link rel="prefetch" href="/F2020/assets/js/46.37e77bac.js"><link rel="prefetch" href="/F2020/assets/js/47.f0e1e7ad.js"><link rel="prefetch" href="/F2020/assets/js/48.5b6b9e75.js"><link rel="prefetch" href="/F2020/assets/js/49.818493e4.js"><link rel="prefetch" href="/F2020/assets/js/5.722d8314.js"><link rel="prefetch" href="/F2020/assets/js/50.f9160a1e.js"><link rel="prefetch" href="/F2020/assets/js/51.23445ddd.js"><link rel="prefetch" href="/F2020/assets/js/52.74b403b6.js"><link rel="prefetch" href="/F2020/assets/js/53.59821ac2.js"><link rel="prefetch" href="/F2020/assets/js/54.44362052.js"><link rel="prefetch" href="/F2020/assets/js/55.d6947e6e.js"><link rel="prefetch" href="/F2020/assets/js/56.fd062c7c.js"><link rel="prefetch" href="/F2020/assets/js/57.bdca367e.js"><link rel="prefetch" href="/F2020/assets/js/59.1a925b68.js"><link rel="prefetch" href="/F2020/assets/js/60.2b1d5330.js"><link rel="prefetch" href="/F2020/assets/js/61.f566edd7.js"><link rel="prefetch" href="/F2020/assets/js/62.f836ae34.js"><link rel="prefetch" href="/F2020/assets/js/63.f34d8438.js"><link rel="prefetch" href="/F2020/assets/js/64.be26bf42.js"><link rel="prefetch" href="/F2020/assets/js/65.5b33fabd.js"><link rel="prefetch" href="/F2020/assets/js/66.38722f0c.js"><link rel="prefetch" href="/F2020/assets/js/67.bc61efe9.js"><link rel="prefetch" href="/F2020/assets/js/68.3cf6e246.js"><link rel="prefetch" href="/F2020/assets/js/69.8fd9a7bb.js"><link rel="prefetch" href="/F2020/assets/js/70.b41f8caf.js"><link rel="prefetch" href="/F2020/assets/js/71.a96d1c60.js"><link rel="prefetch" href="/F2020/assets/js/72.04d70935.js"><link rel="prefetch" href="/F2020/assets/js/73.de491df5.js"><link rel="prefetch" href="/F2020/assets/js/74.e5ee8a9e.js"><link rel="prefetch" href="/F2020/assets/js/75.6d2e2098.js"><link rel="prefetch" href="/F2020/assets/js/76.26d3e621.js"><link rel="prefetch" href="/F2020/assets/js/77.5522d813.js"><link rel="prefetch" href="/F2020/assets/js/78.660d4301.js"><link rel="prefetch" href="/F2020/assets/js/79.e34d1770.js"><link rel="prefetch" href="/F2020/assets/js/8.cd8d51b1.js"><link rel="prefetch" href="/F2020/assets/js/9.a7d15d43.js">
    <link rel="stylesheet" href="/F2020/assets/css/0.styles.cc1da3e7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/F2020/" class="home-link router-link-active"><!----> <span class="site-name">MAD9135</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/F2020/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/F2020/modules/" class="nav-link router-link-active">
  Modules
</a></div><div class="nav-item"><a href="/F2020/deliverables/" class="nav-link">
  Assignments
</a></div><div class="nav-item"><a href="/F2020/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/F2020/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/F2020/modules/" class="nav-link router-link-active">
  Modules
</a></div><div class="nav-item"><a href="/F2020/deliverables/" class="nav-link">
  Assignments
</a></div><div class="nav-item"><a href="/F2020/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Content Modules</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/F2020/modules/week1/01-javascript-review/" class="sidebar-link">1.1 JavaScript Review</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/F2020/modules/week1/02-dom-apis/" class="sidebar-heading clickable"><span>1.2 DOM APIs Review</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/F2020/modules/week2/01-data-structures/" class="sidebar-link">2.1 JavaScript Data Types</a></li><li><a href="/F2020/modules/week2/02-modules-promises/" class="sidebar-link">2.2 Modules and Promises</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/F2020/modules/week3/01-what-is-react/" class="sidebar-heading clickable"><span>3.1 What is React?</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/F2020/modules/week3/02-react-tooling/" class="sidebar-heading clickable"><span>3.2 React Tooling</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/F2020/modules/week4/01-components-props/" class="sidebar-link">4.1 Components &amp; Props</a></li><li><a href="/F2020/modules/week4/02-component-state/" aria-current="page" class="active sidebar-link">4.2 State Management</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/F2020/modules/week4/02-component-state/#what-is-state" class="sidebar-link">What is State?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/F2020/modules/week4/02-component-state/#rules-of-state" class="sidebar-link">Rules of State</a></li></ul></li><li class="sidebar-sub-header"><a href="/F2020/modules/week4/02-component-state/#component-lifecycle" class="sidebar-link">Component Lifecycle</a></li><li class="sidebar-sub-header"><a href="/F2020/modules/week4/02-component-state/#hooks" class="sidebar-link">Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/F2020/modules/week4/02-component-state/#rules-of-hooks" class="sidebar-link">Rules of Hooks</a></li><li class="sidebar-sub-header"><a href="/F2020/modules/week4/02-component-state/#usestate" class="sidebar-link">useState()</a></li><li class="sidebar-sub-header"><a href="/F2020/modules/week4/02-component-state/#practice-exercise" class="sidebar-link">Practice Exercise</a></li></ul></li><li class="sidebar-sub-header"><a href="/F2020/modules/week4/02-component-state/#useeffect" class="sidebar-link">useEffect()</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/F2020/modules/week4/02-component-state/#github-profile-example" class="sidebar-link">Github Profile Example</a></li><li class="sidebar-sub-header"><a href="/F2020/modules/week4/02-component-state/#respond-to-user-input" class="sidebar-link">Respond to user input</a></li></ul></li></ul></li><li><a href="/F2020/modules/week5/01-hooks-weather/" class="sidebar-link">5.1 Hooks: State &amp; AJAX</a></li><li><a href="/F2020/modules/week5/02-react-router/" class="sidebar-link">5.2 Navigation</a></li><li><a href="/F2020/modules/week6/01-context/" class="sidebar-link">6.1 React Context</a></li><li><a href="/F2020/modules/week6/02-production-deployment/" class="sidebar-link">6.2 Production Deployment</a></li><li><a href="/F2020/" aria-current="page" class="sidebar-link">7.1 Forms &amp; Animation</a></li><li><a href="/F2020/" aria-current="page" class="sidebar-link">7.2 Styling</a></li><li><a href="/F2020/modules/break-week/" class="sidebar-link">Break Week</a></li><li><a href="/F2020/modules/week8/01-react-design-patterns/" class="sidebar-link">8.1 Advance Features</a></li><li><a href="/F2020/modules/week8/02-working-in-teams/" class="sidebar-link">8.2 Working in teams</a></li><li><a href="/F2020/modules/week9/01-pwa-review/" class="sidebar-link">9.1 PWA Review</a></li><li><a href="/F2020/modules/week9/02-react-pwa/" class="sidebar-link">9.2 PWAs with React</a></li><li><a href="/F2020/modules/week10/01-hello-react-native/" class="sidebar-link">10.1 React Native with Expo</a></li><li><a href="/F2020/modules/week10/02-the-same-but-different/" class="sidebar-link">10.2 What's Different</a></li><li><a href="/F2020/modules/week11/01-layout-navigation/" class="sidebar-link">11.1 Layout &amp; Navigation</a></li><li><a href="/F2020/modules/week11/02-nested-navigation/" class="sidebar-link">11.2 Nested Navigation</a></li><li><a href="/F2020/modules/week12/01-component-libraries/" class="sidebar-link">12.1 React Native Components</a></li><li><a href="/F2020/modules/week12/02-context-themes/" class="sidebar-link">12.2 React Native Styling</a></li><li><a href="/F2020/" aria-current="page" class="sidebar-link">13.1 Remote Data</a></li><li><a href="/F2020/" aria-current="page" class="sidebar-link">13.2 Production Deployment</a></li><li><a href="/F2020/" aria-current="page" class="sidebar-link">14.1 Final Projects</a></li><li><a href="/F2020/" aria-current="page" class="sidebar-link">14.2 Final Projects</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/F2020/deliverables/" class="sidebar-heading clickable"><span>Deliverables</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><header><div class="section-title">
    
  </div> <h1>4.2 React Component State</h1></header> <h2 id="what-is-state"><a href="#what-is-state" class="header-anchor">#</a> What is State?</h2> <p><strong>Special variables for which changes in data should trigger the re-rendering of some part of the UI.</strong></p> <ul><li>React Props are for passing data from one Component to another.</li> <li>React State is intended to <em>belong to</em> a Component.</li> <li>State has an initial value and then can be updated</li> <li>State values can be displayed inside your Component <code>render()</code> method.</li> <li>When state is updated the Component will be re-rendered.</li></ul> <h3 id="rules-of-state"><a href="#rules-of-state" class="header-anchor">#</a> Rules of State</h3> <p>State variables should not be updated by direct assignment. You must use the provided <strong>setState()</strong> method.</p> <p>State variables, and the updating of them, should be encapsulated in the component where they are defined. However, the value of a state variable may be passed to another component via props.</p> <h2 id="component-lifecycle"><a href="#component-lifecycle" class="header-anchor">#</a> Component Lifecycle</h2> <p><a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener noreferrer">React component lifecycle methods diagram<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="hooks"><a href="#hooks" class="header-anchor">#</a> Hooks</h2> <p>Introduced in React v16.8, the hooks API provides a more declarative syntax for integrating component methods with React's lifecycle methods and rendering events.</p> <h3 id="rules-of-hooks"><a href="#rules-of-hooks" class="header-anchor">#</a> Rules of Hooks</h3> <ul><li>top level - not from loops or nested functions</li> <li>only call from React component</li></ul> <h3 id="usestate"><a href="#usestate" class="header-anchor">#</a> useState()</h3> <p>The best way to explain it is to use it. Create a new component called <code>ClickCounter</code>. It will have a variable called <code>count</code> to keep track of how many times the user clicks a button.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">function</span> <span class="token function">ClickCounter</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">const</span> <span class="token function-variable function">setCount</span> <span class="token operator">=</span> <span class="token parameter">newValue</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>count <span class="token operator">=</span> newValue<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ClickCounter
</code></pre></div><p><strong>Why does that not work?</strong></p> <p>React needs to know that it should watch the count variable and re-render when it changes.</p> <p>To fix it, you need to declare count as a new state variable using the <code>useState()</code> hook. Don't forget to import useState from React. The <code>useState()</code> function returns an array. The first element of the array holds the new state variable and the second element holds the &quot;setter&quot; function needed to assign a new value to the state variable.</p> <p>You will want to use <a href="https://javascript.info/destructuring-assignment" target="_blank" rel="noopener noreferrer">array assignment destructuring<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to extract these two elements into easier to use local variables.</p> <div class="language-js extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">function</span> <span class="token function">ClickCounter</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Declare a new state variable, which we'll call &quot;count&quot;.</span>
  <span class="token comment">// The initial value of count will be zero.</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ClickCounter
</code></pre></div><h4 id="multiple-state-variables"><a href="#multiple-state-variables" class="header-anchor">#</a> Multiple state variables</h4> <p>Your component can have as many state variables managed with <code>useState()</code> as you need. Consider this example.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">function</span> <span class="token function">ClickCounter</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>leftClicks<span class="token punctuation">,</span> setLeftClicks<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>rightClicks<span class="token punctuation">,</span> setRightClicks<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked a total <span class="token keyword">of</span> <span class="token punctuation">{</span>leftClicks <span class="token operator">+</span> rightClicks<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setLeftClicks</span><span class="token punctuation">(</span>leftClicks <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>leftClicks<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setRightClicks</span><span class="token punctuation">(</span>rightClicks <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>rightClicks<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> ClickCounter
</code></pre></div><h4 id="dedicated-event-handler-functions"><a href="#dedicated-event-handler-functions" class="header-anchor">#</a> Dedicated event handler functions</h4> <p>As the logic for your event handlers gets more complex, it is a good idea to extract them to a declared function rather than defining them inline with the JSX.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">function</span> <span class="token function">ClickCounter</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>leftClicks<span class="token punctuation">,</span> setLeftClicks<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>rightClicks<span class="token punctuation">,</span> setRightClicks<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">handleLeftClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> increment <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token function">setLeftClicks</span><span class="token punctuation">(</span>leftClicks <span class="token operator">+</span> increment<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleRightClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> increment <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token function">setRightClicks</span><span class="token punctuation">(</span>rightClicks <span class="token operator">+</span> increment<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked a total <span class="token keyword">of</span> <span class="token punctuation">{</span>leftClicks <span class="token operator">+</span> rightClicks<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleLeftClick<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>leftClicks<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleRightClick<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>rightClicks<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ClickCounter
</code></pre></div><h4 id="batched-updates"><a href="#batched-updates" class="header-anchor">#</a> Batched Updates</h4> <p>React does not necessarily update your state variables immediately when you call the corresponding &quot;setState&quot; function. These updates may be done in batches to reduce the number of times components are re-rendered.</p> <p>For this reason, if your &quot;setState&quot; operation depends on the previous value of state, then you should use the optional function syntax.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">function</span> <span class="token function">ClickCounter</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>leftClicks<span class="token punctuation">,</span> setLeftClicks<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>rightClicks<span class="token punctuation">,</span> setRightClicks<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">handleLeftClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> increment <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token function">setLeftClicks</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> prevState <span class="token operator">+</span> increment<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleRightClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> increment <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token function">setRightClicks</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> prevState <span class="token operator">+</span> increment<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked a total <span class="token keyword">of</span> <span class="token punctuation">{</span>leftClicks <span class="token operator">+</span> rightClicks<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleLeftClick<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>leftClicks<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleRightClick<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>rightClicks<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ClickCounter
</code></pre></div><h3 id="practice-exercise"><a href="#practice-exercise" class="header-anchor">#</a> Practice Exercise <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>10 minutes</span></h3> <p>Create a counter component with an increment button and a decrement button. Display the current value of the counter between the buttons.</p> <p>The counter value should increase or decrease depending on which button was clicked.</p> <p><strong>Bonus:</strong> accept the increment and decrement values as props.</p> <details class="custom-block details"><summary>Solution</summary> <p>after class</p></details> <h2 id="useeffect"><a href="#useeffect" class="header-anchor">#</a> useEffect()</h2> <p>In general your React function components should mostly be &quot;pure functions&quot; &amp;mdash they should be deterministic without side effects.</p> <blockquote><p>Data fetching, setting up a subscription, and manually changing the DOM in React components are all examples of side effects.</p></blockquote> <p>In real applications you will most likely need to fetch data from some API or subscribe to a websocket. These asynchronous activities should be encapsulated inside a <code>useEffect()</code> hook.</p> <h3 id="github-profile-example"><a href="#github-profile-example" class="header-anchor">#</a> Github Profile Example</h3> <h4 id="header-component"><a href="#header-component" class="header-anchor">#</a> Header Component</h4> <h5 id="appheader-js"><a href="#appheader-js" class="header-anchor">#</a> AppHeader.js</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">'./logo.svg'</span>
<span class="token keyword">import</span> <span class="token string">'./AppHeader.css'</span>

<span class="token keyword">function</span> <span class="token function">AppHeader</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token string">'App-header'</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>logo<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">'App-logo'</span> alt<span class="token operator">=</span><span class="token string">'React logo'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Demo <span class="token operator">&amp;</span>mdash<span class="token punctuation">;</span> GitHub Profiles<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> AppHeader
</code></pre></div><h5 id="appheader-css"><a href="#appheader-css" class="header-anchor">#</a> AppHeader.css</h5> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.App-header</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>220<span class="token punctuation">,</span> 15%<span class="token punctuation">,</span> 18%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>220<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 98%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.App-logo</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
  <span class="token property">padding-right</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="profilecard-component"><a href="#profilecard-component" class="header-anchor">#</a> ProfileCard Component</h4> <h5 id="profilecard-js"><a href="#profilecard-js" class="header-anchor">#</a> ProfileCard.js</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token string">'./ProfileCard.css'</span>

<span class="token keyword">function</span> <span class="token function">ProfileCard</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'ProfileCard'</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'profile-avatar'</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>avatar_url<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'card-body'</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">'profile-name'</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>props<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">'profile-login'</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>login<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">'profile-bio'</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>bio<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ProfileCard
</code></pre></div><h5 id="profilecard-css"><a href="#profilecard-css" class="header-anchor">#</a> ProfileCard.css</h5> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.ProfileCard</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 1.25rem 0<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
  <span class="token comment">/* border: 2px solid hsl(220, 15%, 46%); */</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 12px 24px 0 <span class="token function">hsl</span><span class="token punctuation">(</span>220<span class="token punctuation">,</span> 15%<span class="token punctuation">,</span> 88%<span class="token punctuation">)</span><span class="token punctuation">,</span> 0 3px 9px 0 <span class="token function">hsl</span><span class="token punctuation">(</span>220<span class="token punctuation">,</span> 15%<span class="token punctuation">,</span> 94%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.profile-avatar</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
  <span class="token property">min-width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
  <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.profile-avatar img</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.card-body</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.profile-name</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.profile-login</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.85rem<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>220<span class="token punctuation">,</span> 15%<span class="token punctuation">,</span> 46%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.profile-bio</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>220<span class="token punctuation">,</span> 0%<span class="token punctuation">,</span> 23%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="app-component"><a href="#app-component" class="header-anchor">#</a> App Component</h4> <h5 id="app-js"><a href="#app-js" class="header-anchor">#</a> App.js</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> AppHeader <span class="token keyword">from</span> <span class="token string">'./AppHeader'</span>
<span class="token keyword">import</span> ProfileCard <span class="token keyword">from</span> <span class="token string">'./ProfileCard'</span>
<span class="token keyword">import</span> <span class="token string">'./App.css'</span>

<span class="token keyword">function</span> <span class="token function">App</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>profile<span class="token punctuation">,</span> setProfile<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>username<span class="token punctuation">,</span> setUsername<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'rlmckenney'</span><span class="token punctuation">)</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">getGitHubProfile</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">githubProfile</span> <span class="token operator">=&gt;</span> <span class="token function">setProfile</span><span class="token punctuation">(</span>githubProfile<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>username<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getGitHubProfile</span> <span class="token punctuation">(</span><span class="token parameter">username</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.github.com/users/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span>

    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'App'</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>AppHeader <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>main className<span class="token operator">=</span><span class="token string">'ProfileList'</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> padding<span class="token operator">:</span> <span class="token string">'1rem'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ProfileCard key<span class="token operator">=</span><span class="token punctuation">{</span>profile<span class="token punctuation">.</span>id<span class="token punctuation">}</span> profile<span class="token operator">=</span><span class="token punctuation">{</span>profile<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre></div><h5 id="app-css"><a href="#app-css" class="header-anchor">#</a> App.css</h5> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.App form</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.App input</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 1.125rem<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0.25rem 0.5rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.App button</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 1.125rem<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0.25rem 0.5rem<span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="respond-to-user-input"><a href="#respond-to-user-input" class="header-anchor">#</a> Respond to user input</h3> <p>OK. That worked fine. We loaded the user profile from GitHub and updated the <code>profile</code> state variable, which triggered the <code>&lt;ProfileCard&gt;</code> component to re-render.</p> <p>Now, lets go the next step and have the user be able to type in a GitHub username to trigger a new <code>fetch</code> call and display the new profile.</p> <h4 id="add-a-form"><a href="#add-a-form" class="header-anchor">#</a> Add a form</h4> <p>Between the header and the main elements add a form with an input and a button.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'text'</span> value<span class="token operator">=</span><span class="token punctuation">{</span>searchTerm<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleInput<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">'submit'</span><span class="token operator">&gt;</span>Fetch<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
</code></pre></div><p>We will make the input field a <a href="https://reactjs.org/docs/forms.html" target="_blank" rel="noopener noreferrer">controlled component<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. So, we will also need another state variable to track the contents of the input.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>searchTerm<span class="token punctuation">,</span> setSearchTerm<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
</code></pre></div><p>And, we will need an event handler for the input element's <code>change</code> event.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">handleInput</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setSearchTerm</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
</code></pre></div><p>Finally, we need an event handler for when the form is submitted. When the user is done typing and either presses <code>enter</code> to clicks the <code>Fetch</code> button, the form element's <code>submit</code> event will fire.</p> <p>All we need to do now is update the <code>username</code> state variable to be the same as the <code>searchTerm</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">setUsername</span><span class="token punctuation">(</span>searchTerm<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Because <code>username</code> is included in the array of watched dependencies (second argument) of the <code>useEffect()</code> method, changing the value of <code>username</code> will cause <code>useEffect</code> to run the callback function and fetch the requested user profile, which will in turn update the <code>profile</code> variable which will cause the <code>&lt;ProfileCard&gt;</code> to re-render and display the results.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: :</span> <span class="time">10/3/2020, 4:04:14 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/F2020/modules/week4/01-components-props/" class="prev">
        4.1 React Components &amp; Props
      </a></span> <span class="next"><a href="/F2020/modules/week5/01-hooks-weather/">
        5.1 Hooks: State &amp; AJAX
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/F2020/assets/js/app.71c50f4b.js" defer></script><script src="/F2020/assets/js/2.ad437195.js" defer></script><script src="/F2020/assets/js/58.90d58982.js" defer></script><script src="/F2020/assets/js/6.2620568a.js" defer></script><script src="/F2020/assets/js/7.549e4e32.js" defer></script>
  </body>
</html>
