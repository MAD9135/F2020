(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{436:function(t,e,a){"use strict";a.r(e);var s=a(42),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("PageHeader"),t._v(" "),a("h2",{attrs:{id:"create-react-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-react-app"}},[t._v("#")]),t._v(" Create React App")]),t._v(" "),a("p",[t._v("If you are using Create React App 4 (released October 2020), creating a PWA with React just go a little easier. One of the biggest changes is that you can use the Workbox "),a("a",{attrs:{href:"https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-webpack-plugin.InjectManifest",target:"_blank",rel:"noopener noreferrer"}},[t._v("InjectManifest"),a("OutboundLink")],1),t._v(" plugin for Webpack to automatically inject your Webpack managed assets into the service-worker's "),a("a",{attrs:{href:"https://developers.google.com/web/tools/workbox/guides/precache-files",target:"_blank",rel:"noopener noreferrer"}},[t._v("precache"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("It also provides a starter "),a("code",[t._v("service-worker.js")]),t._v(" module and the registration functions.")]),t._v(" "),a("p",[t._v("To get all of this well thought out, automated goodness, you need to use the "),a("code",[t._v("--template")]),t._v(" flag with CRA.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("npx create-react-app my-app --template cra-template-pwa\n")])])]),a("h3",{attrs:{id:"enable-the-service-worker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#enable-the-service-worker"}},[t._v("#")]),t._v(" Enable the service worker")]),t._v(" "),a("p",[t._v("And then in the project's main "),a("code",[t._v("index.js")]),t._v(" module, look for this comment block ...")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If you want your app to work offline and load faster, you can change")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// unregister() to register() below. Note this comes with some pitfalls.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Learn more about service workers: https://cra.link/PWA")]),t._v("\nserviceWorkerRegistration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unregister")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Notice that the service worker is not enabled by default. Update to opt-in to using the service worker.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("serviceWorkerRegistration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"update-the-pwa-manifest"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-the-pwa-manifest"}},[t._v("#")]),t._v(" Update the PWA Manifest")]),t._v(" "),a("p",[t._v("A default progressive web app manifest is provided at "),a("code",[t._v("public/manifest.json")]),t._v(". You will need to customize it with your correct app meta data: name, icons, theme colour, etc. See Google's "),a("a",{attrs:{href:"https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web App Manifest Guide"),a("OutboundLink")],1),t._v(" for details on all of the options.")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"short_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"React App"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Create React App Sample"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icons"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"src"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"favicon.ico"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sizes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"64x64 32x32 24x24 16x16"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image/x-icon"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"src"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"logo192.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image/png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sizes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192x192"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"src"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"logo512.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image/png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sizes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"512x512"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"start_url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"display"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"standalone"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"theme_color"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"background_color"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#ffffff"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("CRA Official Docs")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Making a Progressive Web App"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"practice-exercises"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#practice-exercises"}},[t._v("#")]),t._v(" Practice Exercises")]),t._v(" "),a("h3",{attrs:{id:"basic-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#basic-setup"}},[t._v("#")]),t._v(" Basic setup")]),t._v(" "),a("ol",[a("li",[t._v("Create a new React project using "),a("code",[t._v("create-react-app")]),t._v(" and the PWA template.")]),t._v(" "),a("li",[t._v("Update the manifest file to change the "),a("code",[t._v("Name")]),t._v(" to be your name and the "),a("code",[t._v("Short name")]),t._v(" to be your Algonquin user id.")]),t._v(" "),a("li",[t._v("Enable to service worker")]),t._v(" "),a("li",[t._v("Create a production build of the project with "),a("code",[t._v("yarn build")])]),t._v(" "),a("li",[a("code",[t._v("cd")]),t._v(" into the "),a("code",[t._v("build")]),t._v(" folder and run a node web server: "),a("code",[t._v("npx serve")])]),t._v(" "),a("li",[t._v("Open the app in a new Incognito browser window.")]),t._v(" "),a("li",[t._v("Open the "),a("code",[t._v("Network")]),t._v(" tab in Chrome DevTools. Disable the cache and simulate "),a("code",[t._v("offline")]),t._v(" status. Now try to reload the browser - it should still work.")]),t._v(" "),a("li",[t._v("Run the lighthouse report in Chrome DevTools. Inspect the report.")]),t._v(" "),a("li",[t._v("Open the "),a("code",[t._v("Application")]),t._v(" tab in Chrome DevTools. Review the "),a("code",[t._v("Manifest")]),t._v(" and "),a("code",[t._v("Service Worker")]),t._v(" information.")]),t._v(" "),a("li",[t._v("Take a screenshot of the "),a("code",[t._v("Manifest")]),t._v(" details in DevTools showing the "),a("code",[t._v("Identity")]),t._v(" section and post that to our class Slack channel.")])]),t._v(" "),a("h3",{attrs:{id:"add-routing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-routing"}},[t._v("#")]),t._v(" Add routing")]),t._v(" "),a("ol",{attrs:{start:"11"}},[a("li",[t._v("Add "),a("code",[t._v("react-router")]),t._v(" to your project.")]),t._v(" "),a("li",[t._v("Create a simple navigation with three pages.")]),t._v(" "),a("li",[t._v("Add a CSS file for each page to apply some unique styling for each of the three pages.")]),t._v(" "),a("li",[t._v("Build and test your application in offline mode.")])]),t._v(" "),a("h3",{attrs:{id:"customize-the-service-worker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#customize-the-service-worker"}},[t._v("#")]),t._v(" Customize the service worker")]),t._v(" "),a("ol",{attrs:{start:"15"}},[a("li",[t._v("Add an image file (jpeg or png) to each of the three pages. Store the images in the "),a("code",[t._v("public/img")]),t._v(" folder.")]),t._v(" "),a("li",[t._v("Build and test your application in offline mode. Do you see the images?")]),t._v(" "),a("li",[t._v("Modify "),a("code",[t._v("service-worker.js")]),t._v(" to add "),a("a",{attrs:{href:"https://developers.google.com/web/tools/workbox/guides/get-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("Workbox"),a("OutboundLink")],1),t._v(" modules to cache the image assets.")]),t._v(" "),a("li",[t._v("Build and test your application in offline mode. Do you see the images?")])]),t._v(" "),a("h3",{attrs:{id:"bonus"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bonus"}},[t._v("#")]),t._v(" BONUS")]),t._v(" "),a("ol",{attrs:{start:"19"}},[a("li",[t._v("Research how you can use "),a("code",[t._v("React.lazy")]),t._v(" and "),a("code",[t._v("React.Suspense")]),t._v(" to trigger code-splitting.")]),t._v(" "),a("li",[t._v("Test to see if it still works in offline mode.")])])],1)}),[],!1,null,null,null);e.default=r.exports}}]);