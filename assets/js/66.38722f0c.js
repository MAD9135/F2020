(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{429:function(e,t,a){"use strict";a.r(t);var s=a(42),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("PageHeader"),e._v(" "),a("p",[e._v("When you are ready to share your latest creation with the world, there are a couple of things that need to happen.")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Run the "),a("code",[e._v("build")]),e._v(" script to package all of the project dependencies into the fewest compressed files possible. Webpack will help manage this part.")])]),e._v(" "),a("li",[a("p",[e._v("Copy the resulting files to your website hosting service.")])])]),e._v(" "),a("p",[e._v("Depending on which hosting service you are using, these steps may look a little different. Let's look at two different options.")]),e._v(" "),a("h2",{attrs:{id:"manual-build-and-deploy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manual-build-and-deploy"}},[e._v("#")]),e._v(" Manual Build and Deploy")]),e._v(" "),a("h3",{attrs:{id:"the-build-step"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-build-step"}},[e._v("#")]),e._v(" The build step")]),e._v(" "),a("p",[e._v("The development build for React has a lot of extras that help with the development process, like source-maps and hot-module-replacement. It also makes no attempt to minify anything.")]),e._v(" "),a("p",[e._v('The production build, will use a more streamlined version of the core React library and take advantage of Webpack\'s "tree shaking" capabilities to slim down your third-party dependencies as well.')]),e._v(" "),a("p",[e._v("Create React App has already done the hard work of configuring Webpack and scripting the whole build process. You just need to run the "),a("code",[e._v("build")]),e._v(" script from the "),a("code",[e._v("package.json")]),e._v(" file like this ...")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("yarn build\n")])])]),a("p",[a("strong",[e._v("or")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("npm run build\n")])])]),a("p",[e._v("From the docs ...")]),e._v(" "),a("blockquote",[a("p",[e._v("Builds the app for production to the build folder.\nIt correctly bundles React in production mode and optimizes the build for the best performance.")]),e._v(" "),a("p",[e._v("The build is minified and the filenames include the hashes.\nYour app is ready to be deployed!")])]),e._v(" "),a("h3",{attrs:{id:"deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deployment"}},[e._v("#")]),e._v(" Deployment")]),e._v(" "),a("p",[e._v("Running the command "),a("code",[e._v("yarn build")]),e._v(" will create a "),a("em",[e._v("build")]),e._v(" folder at the top level of your project, minimize your project and copy the files into this build folder. You can now put the contents of this folder on your webserver as your website with SSH or SFTP.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Create React App - Deployment Guide")]),e._v(" "),a("p",[e._v("The "),a("a",{attrs:{href:"https://facebook.github.io/create-react-app/docs/deployment",target:"_blank",rel:"noopener noreferrer"}},[e._v("create-react-app documentation"),a("OutboundLink")],1),e._v(" has detailed instructions for deploying to the most common hosting options.")])]),e._v(" "),a("h2",{attrs:{id:"github-pages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-pages"}},[e._v("#")]),e._v(" GitHub Pages")]),e._v(" "),a("h3",{attrs:{id:"no-support-for-history-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#no-support-for-history-api"}},[e._v("#")]),e._v(" No support for History API")]),e._v(" "),a("p",[e._v("GitHub Pages does not support the automatic redirects necessary for client-side routing using the HTML5 "),a("code",[e._v("pushState")]),e._v(" history API. If you are hosting on GitHub then "),a("code",[e._v("BrowserRouter")]),e._v(" will fail. You will need to use "),a("code",[e._v("HashRouter")]),e._v(" instead.")]),e._v(" "),a("p",[e._v("This means that a path like "),a("code",[e._v("https://www.example.com/kids/123")]),e._v(" would have to be written like "),a("code",[e._v("https://www.example.com/#/kids/123")]),e._v(" instead.")]),e._v(" "),a("p",[a("strong",[e._v("See the "),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/HashRouter",target:"_blank",rel:"noopener noreferrer"}},[e._v("Hashrouter referece"),a("OutboundLink")],1),e._v(" documentation.")])]),e._v(" "),a("h3",{attrs:{id:"building-for-relative-paths"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#building-for-relative-paths"}},[e._v("#")]),e._v(" Building for relative paths")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("From the docs ...")]),e._v(" "),a("p",[e._v("By default, Create React App produces a build assuming your app is hosted at the server root.")]),e._v(" "),a("p",[e._v("To override this, specify the homepage in your package.json, for example:")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"homepage"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://YOUR-USERANME.github.io/REPO-NAME"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n")])])]),a("p",[e._v("This will let Create React App correctly infer the root path to use in the generated HTML file.")])]),e._v(" "),a("h3",{attrs:{id:"create-your-github-repo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-your-github-repo"}},[e._v("#")]),e._v(" Create your GitHub Repo")]),e._v(" "),a("p",[e._v("Follow the normal steps to set up your GitHub Repo and then link it to your local development git repo and push the commits up to the server.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('git init\ngit add -A\ngit commit -m "Add React project files"\ngit remote add origin https://github.com/YOUR-USERANME/REPO-NAME.git\ngit push -u origin master\n')])])]),a("p",[e._v("Go to your GitHub repo, AFTER pushing to the repo, and set the "),a("code",[e._v("gh-pages")]),e._v(" branch as the source for the gh-pages website by adding a "),a("code",[e._v("gh-pages")]),e._v(" branch.")]),e._v(" "),a("h3",{attrs:{id:"gh-pages-npm-package"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gh-pages-npm-package"}},[e._v("#")]),e._v(" gh-pages NPM package")]),e._v(" "),a("p",[e._v("Install "),a("code",[e._v("gh-pages")]),e._v(" from npm, as a development dependency.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("yarn add gh-pages -D\n")])])]),a("p",[e._v("Update your "),a("code",[e._v("package.json")]),e._v(" file to add the "),a("code",[e._v("deploy")]),e._v(" and "),a("code",[e._v("predeploy")]),e._v(" scripts.")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"homepage"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://username.github.io/repo-name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"predeploy"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"yarn run build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"deploy"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"gh-pages -d build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"start"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"react-scripts start"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"react-scripts build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"react-scripts test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"eject"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"react-scripts eject"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("The "),a("code",[e._v("predeploy")]),e._v(" script will be run automatically when you run "),a("code",[e._v("yarn deploy")]),e._v(". This will run the normal CRA build process, placing the production ready files in the "),a("code",[e._v("build")]),e._v(" folder. The deploy script will then create a new "),a("code",[e._v("gh-pages")]),e._v(" branch (if it does not already exist) in your GitHub repo and push the contents of the "),a("code",[e._v("build")]),e._v(" folder to that branch. It will also automatically enable the GitHub Pages publishing feature in your repo's settings.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("yarn deploy\n")])])]),a("p",[e._v("Wait for that to finish, then visit "),a("code",[e._v("https://USER-NAME.github.io/REPO-NAME/")]),e._v(" to see your public React site working.")]),e._v(" "),a("h4",{attrs:{id:"reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[e._v("#")]),e._v(" Reference")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://reacttraining.com/react-router/web/api/HashRouter",target:"_blank",rel:"noopener noreferrer"}},[e._v("HashRouter reference"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.youtube.com/watch?v=517npPWIb8Q",target:"_blank",rel:"noopener noreferrer"}},[e._v("Deploying Production Build React App on gh-pages video"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"netlify"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#netlify"}},[e._v("#")]),e._v(" Netlify")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://www.netlify.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Netlify"),a("OutboundLink")],1),e._v(" is another great hosting option with a generous free tier. It makes deploying your sites (React or otherwise) dead simple. Once configured, you can just push a new commit to your "),a("code",[e._v("main")]),e._v(" branch and Netlify will automatically run the build process and deploy your site.")]),e._v(" "),a("h3",{attrs:{id:"set-up-continuous-delivery"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-up-continuous-delivery"}},[e._v("#")]),e._v(" Set up continuous delivery")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://app.netlify.com/signup",target:"_blank",rel:"noopener noreferrer"}},[e._v("Start a new netlify project"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("Pick your Git hosting service and select your repository")]),e._v(" "),a("li",[e._v("Click Build your site")])]),e._v(" "),a("h3",{attrs:{id:"support-for-client-side-routing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#support-for-client-side-routing"}},[e._v("#")]),e._v(" Support for client-side routing")]),e._v(" "),a("p",[e._v("To support "),a("code",[e._v("pushState")]),e._v(" (i.e. with BrowserRouter), make sure to create a "),a("code",[e._v("public/_redirects")]),e._v(" file with the following rewrite rules:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("/*  /index.html  200\n")])])]),a("p",[e._v("When you build the project, Create React App will place the public folder contents into the build output and Netlify will correctly handle the redirects.")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("Remember")]),e._v(" "),a("p",[e._v("If you are publishing to Netlify, you should remove the "),a("code",[e._v("gh-pages")]),e._v(" related changes to your "),a("code",[e._v("package.json")]),e._v(" file.")])]),e._v(" "),a("h2",{attrs:{id:"assignments-reminder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#assignments-reminder"}},[e._v("#")]),e._v(" Assignments Reminder")]),e._v(" "),a("p",[e._v("Class assignment "),a("a",{attrs:{href:"/deliverables/c2"}},[e._v("C2 - React Navigation")]),e._v(" is due this week.")]),e._v(" "),a("p",[e._v("Class assignment "),a("a",{attrs:{href:"/deliverables/c3"}},[e._v("C3 - React Deployment")]),e._v(" is due next week.")])],1)}),[],!1,null,null,null);t.default=r.exports}}]);